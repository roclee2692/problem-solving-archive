# 计数型 DP 的核心模型："球盒问题"

几乎所有的基础组合计数问题，都可以抽象为**"把 n 个球放入 k 个盒子"**的模型。根据球和盒子是否"可区分"，我们有四种基本情况：

## 四种基本模型

| 球 (n个) | 盒子 (k个) | 模型/方法 | 公式/思想 |
| --- | --- | --- | --- |
| **可区分** | **可区分** | 任意放置 | kn<br><br/>（每个球都有k个选择） |
| **不可区分** | **可区分** | 隔板法 (Stars and Bars) | (k−1n+k−1​)<br><br/>（n个球和k-1个隔板的排列） |
| **可区分** | **不可区分** | 第二类斯特林数 | S(n,k)<br><br/>（n个不同物品放k个相同非空盒子） |
| **不可区分** | **不可区分** | 整数划分 | pk​(n)<br><br/>（将整数n拆成k个正整数之和） |

---

## 详细解释

### 1. 球和盒都不同 → kn

**场景**：想象 n 个不同的学生去 k 个不同的教室。

**思路**：每个学生都有 k 种选择，根据乘法原理，总方案数是：

k×k×⋯×k=kn

---

### 2. 球同盒不同 → 隔板法 (k−1n+k−1​)

**场景**：想象把 n 个完全相同的糖果分给 k 个不同的小朋友（允许有人不得）。

**思路**：

- 我们可以把 n 个糖果和 k-1 个隔板排成一排
- 两个隔板之间的糖果就属于一个小朋友
- 总共 n+k-1 个位置，选 k-1 个位置放隔板

**公式**：

(k−1n+k−1​)=(nn+k−1​)

---

### 3. 球不同盒同 → 第二类斯特林数 S(n,k)

**场景**：这就是我们昨天学习的第二类斯特林数的定义。

**含义**：将 n 个不同的物品放入 k 个相同的非空盒子中的方案数。

---

### 4. 球和盒都同 → 整数划分 pk​(n)

**场景**：想象把 n 个相同的苹果分成 k 堆。

**含义**：等价于将整数 n 分解成 k 个正整数的和（不考虑顺序）。

**求解**：这个问题通常用一个更复杂的 DP 来解决。

---

## 总结

> 💡 **这些模型是计数 DP 的基础，很多问题都可以转化为其中的一种或它们的组合。**